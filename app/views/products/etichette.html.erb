<style>
body {
    font-family: Arial, sans-serif !important;
    margin: 0;
    padding: 0;
}

* {
    box-sizing: border-box;
}

#et {
    margin: 0;
    padding: 0;
    width: 210mm;
}

#et .cell,
#et .notez {
    margin: 0;
    padding: 12mm 6mm 4mm;
    float: left;
    width: 70mm;
    height: 36mm;
    position: relative;
    font-size: 8.65pt !important;
    line-height: 10.4pt !important;
    overflow: hidden;
}

#et .cell.notez {
    padding-top: 6mm;
}

#et .cell .sub p {
    line-height: 10.4pt !important;
    font-size: 8.65pt !important;
    margin: 0;
    padding: 0;
}

</style>

<div id="et">
        <% counter = 0 %>
        <% i = 0 %>
       <% @products.each do |iz, val| %>
        <% if i == 0 %>
          <% val.sort.each do |product| %>

             <% qty = product.qty.to_i %>
              <% qty.times do %>
                <% if product.note == '' %>
                  <div class="cell">
                <% else %>
                  <div class="cell notez">
                <% end %>
                  <div class="sub">
                    <%= product.itemcode %> <%= product.fabricode %> <%= product.varcode %>
                    <p>
                      <%= raw(product.description.gsub(/\R+/, '<br/>')) %></p>

                    <p>tg <%= product.tg %></p>
                <%= product.color %><br>
                <%= product.materiale %>
                <% if product.note.present? %>
                 <p> <%= product.note %> </p>
                <% end %>
                </div>
                <% counter = counter + 1 %>
                </div>
            <% end %>
              <% if counter.modulo(24) == 0 %>
              <div style="clear:both; page-break-after: always;"></div>
              <% end %>

          <% end %>

        <% i += 1 %>
    <% end %>
    <% end %>
</div>
